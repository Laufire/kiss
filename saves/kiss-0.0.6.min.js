!function(n,t){"use strict";var e=n.O_O=new function(){function e(n,t){var e=n.indexOf(t);return e>-1?n.splice(e,1):void 0}function r(n,t){for(var e,r=0,u=h(n);r<u.length;++r)t(e=u[r],n[e])}function u(n,t){for(var e,r,u=0,o={},i=h(n);u<i.length;++u)e=i[u],r=n[e],t[e]!==r&&(o[e]=r);return o}function o(n){for(var t,e,r=0;r<arguments.length;++r){t=arguments[r],e=h(t);for(var u,o,i=0;i<e.length;++i)u=e[i],o=t[u],void 0!==o&&(n[u]=o)}return n}function i(n,t){return"object"!=typeof n?v("["+d+'="'+n+'"]',t):v(n,t)}function a(n){return"function"==typeof n?n():n}function c(n,t){var t=n[t];return"function"==typeof t?t():t}function f(n,t,e){var t=n[t];return"function"==typeof t?t(e):t=e}var l,s=this,v=DOM.$,d="id",p=Array.isArray,h=Object.keys;s.VERSION="0.0.6",s.keyAttr=function(n){d=n},s.ready=function(n){l=n},DOM.ready(function(){var n=location.hash.substr(1);l?(l(),s.state.set(n)):s.ready=function(t){t(),s.state.set(n)}}),s.class={host:function(){var n=[],t=this.wrap=function(t,e){for(var r=0;r<n.length;++r)n[r](t,e)};t.plug=function(e){return n.push(e),function(){t.unplug(e)}},t.unplug=function(t){e(n,t)}},box:function(u){function c(){if(x){if(x.init&&(x.init(w),delete x.init),x.default){var e="change",r=x.default;if(r.event&&(e=r.event,r=r.value),delete x.default,$>1){var u=2==$?"checked":"value";return r.plug?(r.plug(function(e){m.prop(u,e);var r=t.createEvent("UIEvent");r.initUIEvent(r,!1,!1,n,e),m.el.dispatchEvent(r)}),m.el.addEventListener(e,function(n){r(n.target[u])}),m.prop(u,r()),g):m[method](u,a(r))}1==$?g.event("click",r):g.html(r)}g(x),x=void 0}}function f(n){if(void 0!==n.required){var t=n.type;return"checkbox"==t?2:"submit"==t?1:3}return void 0!==m.el.formAction?1:0}function l(n,t,e){if(void 0===e)return m[n](t);if(y[n][t]&&(y[n][t](),delete y[n][t]),!e.plug)return m[n](t,a(e));var r=v(n,t);return y[n][t]=e.plug(r),r(e()),g}function v(n,t){return function(e){m[n](t,e)}}function p(){for(var n,t,e=0;e<O.length;++e)n=O[e],i(n,m.el).el&&(t=w[n],"object"==typeof t?(""==t.constructor.name||"Object"==t.constructor.name)&&(w[n]=s.box(t)):w[n]=s.box({$:{"default":t}}),w[n].$.at(n,w))}var g,m,$,w=this,b={},y={prop:{},attr:{},"class":{}},x=u.$,O=h(o(w,u));e(O,"$"),g=u.$=w.$=function(n){return r(n,function(n,t){"object"==typeof t?r(t,function(e){g[n](e,t[e])}):g[n]&&g[n](t)}),g},g.set=function(n){for(var t=0,e=h(n);t<e.length;++t){var r=e[t],u=n[r],o=w[r];o&&(o.$?o.$.val(u):o.data?o.data(u):o(u))}return g},g.at=function(n,e){return e?(w.$.parent=e,m=i(n,e.$.el)):m=i(n,t),g.$el=m,g.el=m.el,g.id=m.attr(d),$=f(m.el),c(),p(),g},g.remove=function(){for(var n,t,e=0;e<O.length;++e)t=O[e],n=w[t],n.$&&n.$.remove(),delete w[t];r(y,function(n,t){r(t,function(n,t){t()})}),m.el.remove()},g.val=function(n){var t;if(3==$?t="value":2==$&&(t="checked"),void 0!==n)return t?m.prop(t,n):m.html(n),g;if(t)return g.prop(t);if(0==$){if(!O.length)return;for(var e=0,r={};e<O.length;++e){var u,o=O[e],i=w[o];i&&i.$&&(u=i.$.val()),void 0!==u&&(r[o]=u)}return r}},g.html=function(n){return arguments.length?(l("prop","innerHTML",n),p(),void 0):m.html()},g.prop=function(n,t){return l("prop",n,t)},g.attr=function(n,t){return l("attr",n,t)},g.class=function(n,t){return l("class",n,t)},g.event=function(n,t){var e,r,u=n.indexOf(" ");return u>-1?(e=m.$(n.substr(u+1)),r=n.substr(0,u)):(e=m,r=n),b[n]&&e.off(r,b[n]),t&&e.on(r,b[n]=function(n){t(n,w)}),g}},pod:function(n){function t(n){var t=n.type,e=n.data,r=e[u],o=v[r];"remove"!=t?c[t](e):c.remove(r),c.event(n,o)}function e(n){n[u]=this.id,a.data(n)}var u,i,a=n.source,c=this,l=n.item,v=c.items={},p=n.mode||"append",h=s.box({$:n.$}),n=void 0;c.$=o({},h.$),c.$.at=function(n,t){h.$.at(n,t),i=h.$.prop("firstElementChild"),h.$.html(""),a&&c.source(a)},c.set=function(n){r(n,function(n,t){f(c[n],t)})},c.source=function(n){return void 0===n?a:(a=n,a.event.plug(t),u=a.idProp,r(v,function(n){c.remove(n)}),r(a.items,function(n,t){c.add(t)}),c)},c.add=function(n){var t,r=n[u];h.$.$el[p](i.cloneNode()).attr(d,r),t=v[r]=s.box(new l(n)),t.$.data=e,t.$.at(r,c).set(n)},c.change=function(n){v[n[u]].$.set(n)},c.remove=function(n){v[n].$.remove(),delete v[n]},c.event=s.host()},value:function(n){var t=this;t.val=function(r){if(arguments.length){if(r===n)return;t.val.prev=n,n=r,e(r,t.val)}return n};var e=s.host();t.val.plug=e.plug,t.val.unplug=e.unplug},object:function(n){this.wrap=function(t){if(!t){var e={};return r(n,function(t){e[t]=c(n,t)}),e}r(t,function(t,e){f(n,t,e)})},o(this.wrap,n)},list:function(n){function t(n){c[n[f]]?r(n):e(n)}function e(n){a.length++;var t=n[f]+="";l({type:"add",id:t,data:c[t]=o({},n)},a)}function r(n){var t=n[f],e=c[t];l({type:"change",id:t,changes:u(n,e),data:o(e,n)},a)}function i(n){a.length--,l({type:"remove",id:n,data:c[n]},a),delete c[n]}var a=this,c=a.items={},f=a.idProp=n.idProp,l=a.event=s.host();n.data||(n.data=[]),a.data=function(n){if(p(n))for(var e=0;e<n.length;++e)t(n[e]);else t(n);return a},a.remove=function(n){if(p(n))for(var t=0;t<n.length;++t)i(n[t]);else i(n);return a},a.reset=function(n){a.remove(h(c)),n&&a.data(n)},a.length=0,n=void 0},watch:function(){var n=this,t=function(){},r=function(n,e){t(n,e)},u=[];n.watch=function(){for(var t,e=0;e<arguments.length;++e)t=arguments[e],-1==u.indexOf(t)&&(u.push(t),t.plug(r));return n},n.unwatch=function(){for(var t=0;t<arguments.length;++t)r=e(u,arguments[t]),r&&u.unplug(r);return n},n.clear=function(){for(var t=0;t<u.length;++t)u[t].unplug(r);return u=[],n},n.action=function(e){return t=e,n}}},s.box=function(n){return new s.class.box(n||{})},s.pod=function(n){return new s.class.pod(n||{})},s.host=function(){return(new s.class.host).wrap},s.value=function(n){return new s.class.value(n).val},s.object=function(n){return new s.class.object(n).wrap},s.list=function(n){return new s.class.list(n)},s.listen=function(n,t){return{stop:n.plug(t)}},s.watch=function(){for(var n=0,t=new s.class.watch;n<arguments.length;++n)t.watch(arguments[n]);return t},s.trans=function(n){return function(t,e){var r=function(){return n(t(),t,e)};return r.plug=function(r){return t.plug(function(t,u){r(n(t,u,e))})},r}},s.state=new function(){function n(n,t){e[n]=t}var t=this,e=t.list={};t.change=s.value(),t.add=function(t,e){"object"==typeof t?r(t,n):n(t,e)},t.remove=function(n){var t=e[n];return delete e[n],t},t.set=function(n){n||(n="/"),t.change(n)},t.change.plug(function(n){var r=e[n];r&&r(n),t.set(n),location.hash=n})},s.plugin=function(n,t){return t?(s.plugin[n]=t,void 0):self.plugin[n]}};n.addEventListener("popstate",function(){e.state.set(location.hash.substr(1))})}(window,document);