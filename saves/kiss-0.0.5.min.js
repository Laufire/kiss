!function(n,t){"use strict";var e=n.O_O=new function(){function n(n,t){var e=n.indexOf(t);return e>-1?n.splice(e,1):void 0}function e(n,t){var e,r,o=Object.keys(n);for(e=0;e<o.length;++e)t(r=o[e],n[r])}function r(n,t){var e,r,o,u={},i=Object.keys(n);for(e=0;e<i.length;++e)r=i[e],o=n[r],t[r]!==o&&(u[r]=o);return u}function o(n){var t,e,r;for(t=1;t<arguments.length;++t){e=arguments[t],r=Object.keys(e);var o,u,i;for(o=0;o<r.length;++o)u=r[o],i=e[u],void 0!==i&&(n[u]=i)}return n}function u(n,t){return"object"!=typeof n?d("["+v+'="'+n+'"]',t):d(n,t)}function i(n){return"function"==typeof n?n():n}function a(n,t,e){var r,o;for(r=0;r<e.length;++r)o=e[r],n[o]=t[o];return n}function c(n,t){var t=n[t];return"function"==typeof t?t():t}function f(n,t,e){var t=n[t];return"function"==typeof t?t(e):t=e}t.documentElement.style.display="none";var l,s,v,p=this,d=DOM.$,h=Array.isArray;p.VERSION="0.0.5",p.keyAttr=function(n){v=n,l=d("script").before("style").html("["+v+"]{display:none}")},p.keyAttr("id"),p.ready=function(n){s=n},DOM.ready(function(){t.documentElement.style.display="",s?(s(),l.remove()):p.ready=function(n){n(),l.remove()}}),p.class={host:function(){var t=[],e=this.wrap=function(n,e){for(var r=0;r<t.length;++r)t[r](n,e)};e.plug=function(n){return t.push(n),function(){e.unplug(n)}},e.unplug=function(e){n(t,e)}},box:function(r){function c(n,t,e){if("undefined"==typeof e)return d[n](t);if(m[n][t]&&(m[n][t](),delete m[n][t]),!e.plug)return d[n](t,i(e));var r=f(n,t);return m[n][t]=e.plug(r),r(e()),s}function f(n,t){return function(e){d[n](t,e)}}function l(){var n,t,e;for(n=0;n<$.length;++n)t=$[n],u(t,d.el).el&&(e=h[t],"object"==typeof e?(""==e.constructor.name||"Object"==e.constructor.name)&&(h[t]=p.box(e)):h[t]=p.box({$:{val:e}}),h[t].$.at(t,h))}var s,d,h=this,g={},m={prop:{},attr:{},"class":{}},y=r.$||{},$=Object.keys(o(h,r));n($,"$");var r=a({},r,$),s=h.$=function(n){return Object.keys(n),e(y,function(n,t){"object"==typeof t?e(t,function(e){s[n](e,t[e])}):s[n]&&s[n](t)}),s};a(h,r,$),s.set=function(n){for(var t=Object.keys(n),e=0;e<t.length;++e){var r=t[e],o=n[r],u=h[r];u&&(u.$?u.$.val(o):u.data?u.data(o):u(o))}return s},s.at=function(n,e){return e?(h.$.parent=e,d=u(n,e.$.el)):d=u(n,t),h.$.$el=d,h.$.el=d.el,y.init&&y.init(),s(y),s.id=d.attr(v),d.el.style.display="none",l(),d.el.style.display="",s},s.remove=function(){var n,t,r;for(n=0;n<$.length;++n)r=$[n],t=h[r],t.$&&t.$.remove(),delete h[r];e(m,function(n,t){e(t,function(n,t){t()})}),d.el.remove()},s.val=function(n){if(void 0!==d.el.required){var t;if(t="checkbox"==d.el.type?"checked":"value",void 0===n)return s.prop(t);s.prop(t,n),n.plug&&s.el.addEventListener("change",function(e){n(e.target[t])})}else if(void 0!==d.el.formAction){if(!n)return;s.event("click",n)}else{if(void 0===n){if(!$.length)return;var e,r={};for(e=0;e<$.length;++e){var o,u=$[e],i=h[u];i&&i.$&&(o=i.$.val()),void 0!==o&&(r[u]=o)}return r}s.html(n)}return s},s.html=function(n){return arguments.length?(c("prop","innerHTML",n),l(),void 0):d.html()},s.prop=function(n,t){return c("prop",n,t)},s.attr=function(n,t){return c("attr",n,t)},s.class=function(n,t){return c("class",n,t)},s.event=function(n,t){var e,r,o=n.indexOf(" ");return o>-1?(e=d.$(n.substr(o+1)),r=n.substr(0,o)):(e=d,r=n),g[n]&&e.off(r,g[n]),t&&e.on(r,g[n]=function(n){t(n,h)}),s}},pod:function(n){function t(n){if("remove"!=n.type)i[n.type](n.data),i.event(n,c[n.data[o]]);else{var t=n.data[o];i.remove(t),i.event(n,c[t])}}n.$||(n.$={}),n.$.init=function(){u=l.$.prop("firstElementChild").cloneNode(),l.$.html(""),i.source(n.source)};var r,o,u,i=this,a=n.item||{},c=i.items={},l=p.box({$:n.$});i.$=l.$,i.set=function(n){e(n,function(n,t){f(i[n],t)})},i.source=function(n){return r=n,r.event.plug(t),o=r.idProp,e(r.items,function(n,t){i.add(t)}),i},i.add=function(n){var t=n[o];l.$.$el.append(u.cloneNode()).attr(v,t),c[t]=p.box("object"==typeof a?a:new a(n)),c[t].$.at(t,i).set(n)},i.change=function(n){c[n[o]].$.set(n)},i.remove=function(n){c[n].$.remove(),delete c[n]},i.event=p.host()},value:function(n){var t=this;t.val=function(r){if(arguments.length){if(r===n)return;t.val.prev=n,n=r,e(r,t.val)}return n};var e=p.host();t.val.plug=e.plug,t.val.unplug=e.unplug},object:function(n){this.wrap=function(t){if(!t){var r={};return e(n,function(t){r[t]=c(n,t)}),r}e(t,function(t,e){f(n,t,e)})},o(this.wrap,n)},list:function(n){function t(n){c[n[f]]?u(n):e(n)}function e(n){a.length++;var t=n[f]+="";l({type:"add",id:t,data:c[t]=o({},n)},a)}function u(n){var t=n[f],e=c[t];l({type:"change",id:t,changes:r(n,e),data:o(e,n)},a)}function i(n){a.length--,l({type:"remove",id:n,data:c[n]},a),delete c[n]}var a=this,c=a.items={},f=a.idProp=n.idProp,l=a.event=p.host();n.data||(n.data=[]),a.data=function(n){if(h(n))for(var e=0;e<n.length;++e)t(n[e]);else t(n);return a},a.remove=function(n){if(h(n))for(var t=0;t<n.length;++t)i(n[t]);else i(n);return a},a.length=0,a.data(n.data),n=void 0},watch:function(){var t=this,e=function(){},r=function(n,t){e(n,t)},o=[];t.watch=function(){var n,e;for(n=0;n<arguments.length;++n)e=arguments[n],-1==o.indexOf(e)&&(o.push(e),e.plug(r));return t},t.unwatch=function(){for(var e=0;e<arguments.length;++e)r=n(o,arguments[e]),r&&o.unplug(r);return t},t.clear=function(){for(var n=0;n<o.length;++n)o[n].unplug(r);return o=[],t},t.action=function(n){return e=n,t}}},p.box=function(n){return new p.class.box(n)},p.pod=function(n){return new p.class.pod(n||{})},p.host=function(){return(new p.class.host).wrap},p.value=function(n){return new p.class.value(n).val},p.object=function(n){return new p.class.object(n).wrap},p.list=function(n){return new p.class.list(n)},p.listen=function(n,t){return{stop:n.plug(t)}},p.watch=function(){var n,t=new p.class.watch;for(n=0;n<arguments.length;++n)t.watch(arguments[n]);return t},p.trans=function(n){return function(t,e){var r=function(){return n(t(),t,e)};return r.plug=function(r){return t.plug(function(t,o){r(n(t,o,e))})},r}},p.state=p.value(),p.plugin=function(n,t){return t?(p.plugin[n]=t,void 0):self.plugin[n]}};n.addEventListener("popstate",function(){e.state(location.hash.substr(1))})}(window,document);