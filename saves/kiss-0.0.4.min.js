!function(n,t){"use strict";var e=n.O_O=new function(){function n(n,t){for(var e=0;e<n.length;++e)t(n[e])}function r(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){for(var e in t)void 0!==t[e]&&(n[e]=t[e])}),n}function o(n,t){if(n&&n[t]){var e=n[t];return delete n[t],e}}function u(n,t){return v("["+p+'="'+n+'"]',t)}function i(n){return"function"==typeof n?n():n}function c(n,t){return"function"==typeof n[t]?n[t]():n[t]}function a(n,t,e){return"function"==typeof n[t]?n[t](e):n[t]=e}t.documentElement.style.display="none";var f=this;f.VERSION="0.0.4";var l,s,p,v=DOM.$;f.keyAttr=function(n){p=n,l=v("script").before("style").html("["+p+"]{display:none}")},f.keyAttr("id"),f.ready=function(n){s=n},DOM.ready(function(){t.documentElement.style.display="",s?(s(),l.remove()):f.ready=function(n){n(),l.remove()}}),f.class={host:function(){var n=this,t=[];n.plug=function(e){return t.push(e),function(){n.unplug(e)}},n.unplug=function(n){var e=t.indexOf(n);e>-1&&t.splice(e,1)},n.fire=function(n,e){for(var r=0;r<t.length;++r)t[r](n,e)}},box:function(n){function t(n,t,e){if("undefined"==typeof e)return a[n](t);if(p[n][t]&&(p[n][t](),delete p[n][t]),!e.plug)return a[n](t,i(e));var r=c(n,t);return p[n][t]=e.plug(r),r(e()),s}function c(n,t){return function(e){a[n](t,e)}}var a,f=this,l={},s=f.$={},p={prop:{},attr:{},"class":{}},v=o(n,"$");s.val=function(t){if("readOnly"in a.el){var e;if(e="checkbox"==a.el.type?"checked":"value",!t)return s.prop(e);s.prop(e,t),"function"==typeof t&&s.event("change",function(n){t(n.currentTarget.value)})}else if("function"==typeof t&&a.el instanceof HTMLButtonElement)s.event("click",t);else{if(!t){var r=Object.keys(n);if(!r.length)return;for(var o={},u=0;u<r.length;++u){var i,c=f[r[u]];i="object"==typeof c?f[r[u]].$.val():f[r[u]](),"undefined"!=typeof i&&(o[r[u]]=i)}return o}s.html(t)}return s},s.el=function(t,e){return arguments.length?(a=u(t,e),v&&(s.digest({$:v}),v=void 0),a.el.style.display="none",d(n,a.el),r(f,n),a.el.style.display="",s):a},s.html=function(n){return t("prop","innerHTML",n)},s.prop=function(n,e){return t("prop",n,e)},s.attr=function(n,e){return t("attr",n,e)},s.class=function(n,e){return t("class",n,e)},s.event=function(n,t){return l[n]&&a.off(n,l[n]),a.on(n,l[n]=t),s},s.digest=function(n){if(n.$){var t=o(n,"$");for(var e in t)if("object"==typeof t[e])for(var r in t[e])s[e](r,t[e][r]);else s[e](t[e])}for(var u=Object.keys(n),i=0;i<u.length;++i)f[u[i]].$?f[u[i]].$.val(n[u[i]]):f[u[i]](n[u[i]]);return s};var d=function(n,t){for(var r in n)if(u(r,t).el){var o=n[r];if("object"==typeof o){if(""==o.constructor.name||"Object"==o.constructor.name)n[r]=e.box(o);else if("pod"==o.constructor.name){n[r].el(r,t);continue}}else n[r]=e.box({$:{val:o}});n[r].$.el(r,t)}}},pod:function(n){function t(n){a[n.type](n.data)}var o,u,i,c,a=this,f=e.box(n.$),l=n.item||{};a.$=f.$,a.items={},a.el=function(t,e){f.$.el(t,e),u=f.$.el(),c=f.$.prop("firstElementChild").cloneNode(),f.$.html(""),a.source(n.source),n=void 0},a.digest=function(n){for(var t=Object.keys(n),e=0;e<t.length;++e)a[t[e]](data[t[e]])},a.source=function(n){o=n,o.event(t),i=o.idProp;for(var e in o.items)a.add(o.items[e]);return a},a.add=function(n){var t=n[i];u.append(c.cloneNode()).attr(p,n[i]),a.items[t]=e.box(r({$:l},n)),a.items[t].$.el(t,u.el)},a.change=function(n){a.items[n[i]].$.digest(r(n,{$:l}))}},value:function(n){var t=this;t.val=function(e){return arguments.length?(e!==n&&(o.fire(e,t.val),n=e),void 0):n};var o=new e.class.host(t.val);r(t.val,o)},object:function(n){this.wrapper=function(t){if(!t){var e={};for(var r in n)e[r]=c(n,r);return e}for(var o in t)a(n,o,t[o])},r(this.wrapper,n)},list:function(n){var t=this,o={},u=n.idProp;t.event=e.value(),t.wrapper=function(n){if(!Array.isArray(n))return o[n];for(var e=0;e<n.length;++e){var i=n[e][u];t.event({type:i in o?"change":"add",data:r(o[i]||{},n[e])},t),o[i]=n[e]}},t.wrapper(n.data),t.wrapper.items=o,t.wrapper.event=t.event,t.wrapper.idProp=u},watch:function(){var n=this,t=function(){},e=function(n,e){t(n,e)},r=[];n.watch=function(){for(var t=0;t<arguments.length;++t)-1==r.indexOf(arguments[t])&&(r.push(arguments[t]),arguments[t].plug(e));return n},n.unwatch=function(){for(var t,o=0;o<arguments.length;++o)t=r.indexOf(arguments[o]),t>-1&&r.splice(t,1)[0].unplug(e);return n},n.clear=function(){for(var t=0;t<r.length;++t)r[t].unplug(e);return r=[],n},n.action=function(e){return t=e,n}}},f.box=function(n){return new e.class.box(n)},f.pod=function(n){return new e.class.pod(n)},f.value=function(n){return new e.class.value(n).val},f.object=function(n){return new e.class.object(n).wrapper},f.list=function(n){return new e.class.list(n).wrapper},f.listen=function(n,t){return{stop:n.plug(t)}},f.watch=function(){var t=new e.class.watch;return n(arguments,t.watch),t},f.trans=function(n){return function(t){var e=function(){return n(t())};return e.plug=function(e){return t.plug(function(t,r){e(n(t,r))})},e}},f.plugin=function(n,t){return t?(f.plugin[n]=t,void 0):f.plugin[n]}}}(window,document);